<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="xiaozhu-sorce"><meta name="copyright" content="xiaozhu-sorce"><meta name="generator" content="Hexo 5.4.2"><meta name="theme" content="hexo-theme-yun"><title>Javaé›†åˆæ¡†æ¶ä¹‹Queue | ç–ç–|å½’ä¸€</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"example.com","root":"/","title":"å°æœ±ã®ç«™ç‚¹","version":"1.8.11","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"fireworks":{"colors":null},"vendors":{"darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="Queuequeueæ˜¯ä¸€ç§åä¸ºé˜Ÿåˆ—çš„æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—æ˜¯æŒ‡ç¬¦åˆâ€œå…ˆè¿›å…ˆå‡ºâ€ï¼ˆFIFOï¼‰çš„ä¸€ç§å®¹å™¨ã€‚æ–°å…ƒç´ æ’å…¥ï¼ˆofferï¼‰åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè®¿é—®å…ƒç´ ï¼ˆpollï¼‰æ“ä½œä¼šè¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚é€šå¸¸ï¼Œé˜Ÿåˆ—ä¸å…è®¸éšæœºè®¿é—®é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚ dequeæ˜¯åŒç«¯é˜Ÿåˆ—ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaé›†åˆæ¡†æ¶ä¹‹Queue">
<meta property="og:url" content="http://example.com/2022/01/24/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BQueue/index.html">
<meta property="og:site_name" content="ç–ç–|å½’ä¸€">
<meta property="og:description" content="Queuequeueæ˜¯ä¸€ç§åä¸ºé˜Ÿåˆ—çš„æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—æ˜¯æŒ‡ç¬¦åˆâ€œå…ˆè¿›å…ˆå‡ºâ€ï¼ˆFIFOï¼‰çš„ä¸€ç§å®¹å™¨ã€‚æ–°å…ƒç´ æ’å…¥ï¼ˆofferï¼‰åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè®¿é—®å…ƒç´ ï¼ˆpollï¼‰æ“ä½œä¼šè¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚é€šå¸¸ï¼Œé˜Ÿåˆ—ä¸å…è®¸éšæœºè®¿é—®é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚ dequeæ˜¯åŒç«¯é˜Ÿåˆ—ã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/e6c9d24ely1h0q1kfg6aqj20xc0c8js7.jpg">
<meta property="article:published_time" content="2022-01-24T12:45:38.000Z">
<meta property="article:modified_time" content="2022-04-21T09:36:01.756Z">
<meta property="article:author" content="xiaozhu-sorce">
<meta property="article:tag" content="é›†åˆ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/e6c9d24ely1h0q1kfg6aqj20xc0c8js7.jpg"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="xiaozhu-sorce"><img width="96" loading="lazy" src="https://i.loli.net/2021/03/23/2QaVR76DWpFEUhu.jpg" alt="xiaozhu-sorce"><span class="site-author-status" title="Don't want to work">ğŸ˜­</span></a><div class="site-author-name"><a href="/about/">xiaozhu-sorce</a></div><span class="site-name">ç–ç–|å½’ä¸€</span><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">12</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">5</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">6</span></a></div><a class="site-state-item hty-icon-button" href="/" title="æ–‡æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/xiaozhu-sorce" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@790362227@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Queue"><span class="toc-number">1.</span> <span class="toc-text">Queue</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PriorityQueue"><span class="toc-number">1.1.</span> <span class="toc-text">PriorityQueue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.1.</span> <span class="toc-text">åº•å±‚æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">æ’åºæ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E6%8E%92%E5%BA%8F%EF%BC%88natural-ordering%EF%BC%89"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">è‡ªç„¶æ’åºï¼ˆnatural orderingï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E6%8E%92%E5%BA%8F%EF%BC%88%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%8Cspecified-comparator%EF%BC%89"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">å®šåˆ¶æ’åºï¼ˆå †æ’åºï¼Œspecified comparatorï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%89%96%E6%9E%90"><span class="toc-number">1.1.3.</span> <span class="toc-text">æ–¹æ³•å‰–æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#add-offer"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">add() || offer()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#poll"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">poll()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#peek"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">peek()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%A4%A7%E9%A1%B6%E5%A0%86"><span class="toc-number">1.1.4.</span> <span class="toc-text">å®ç°å¤§é¡¶å †</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E2%9D%95"><span class="toc-number">1.1.5.</span> <span class="toc-text">æ³¨æ„â•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ArrayDeque"><span class="toc-number">1.2.</span> <span class="toc-text">ArrayDeque</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">åº•å±‚æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%89%96%E6%9E%90-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ–¹æ³•å‰–æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#addFirst"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">addFirst()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#doubleCapacity"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">doubleCapacity()</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://example.com/2022/01/24/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BQueue/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="xiaozhu-sorce"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ç–ç–|å½’ä¸€"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Javaé›†åˆæ¡†æ¶ä¹‹Queue</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">Posted on</span> <time title="Created: 2022-01-24 20:45:38" itemprop="dateCreated datePublished" datetime="2022-01-24T20:45:38+08:00">2022-01-24</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <span class="post-meta-icon-text">Edited on</span> <time title="Modified: 2022-04-21 17:36:01" itemprop="dateModified" datetime="2022-04-21T17:36:01+08:00">2022-04-21</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="Word count in article">1.9k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="Reading time">8m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Java/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Java</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E9%9B%86%E5%90%88/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">é›†åˆ</span></a></span></div><div class="post-author"><span class="author-name">å°æœ±</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h1><p>queueæ˜¯ä¸€ç§åä¸ºé˜Ÿåˆ—çš„æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—æ˜¯æŒ‡ç¬¦åˆâ€œå…ˆè¿›å…ˆå‡ºâ€ï¼ˆFIFOï¼‰çš„ä¸€ç§å®¹å™¨ã€‚æ–°å…ƒç´ æ’å…¥ï¼ˆofferï¼‰åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè®¿é—®å…ƒç´ ï¼ˆpollï¼‰æ“ä½œä¼šè¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚é€šå¸¸ï¼Œé˜Ÿåˆ—ä¸å…è®¸éšæœºè®¿é—®é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚</p>
<p>dequeæ˜¯åŒç«¯é˜Ÿåˆ—ã€‚</p>
<span id="more"></span> 

<h2 id="PriorityQueue"><a href="#PriorityQueue" class="headerlink" title="PriorityQueue"></a>PriorityQueue</h2><p>priorityQueueä½œä¸ºQueueçš„ä¸€ä¸ªå®ç°ç±»ã€‚å…¶ä¿å­˜é˜Ÿåˆ—å…ƒç´ çš„é¡ºåºä¸æ˜¯æŒ‰åŠ å…¥é˜Ÿåˆ—çš„é¡ºåºï¼Œè€Œæ˜¯æŒ‰é˜Ÿåˆ—å…ƒç´ çš„å¤§å°è¿›è¡Œé‡æ–°æ’åºã€‚å› æ­¤å½“è°ƒç”¨peek()æˆ–poll()æ–¹æ³•å–å‡ºé˜Ÿåˆ—ä¸­å¤´éƒ¨çš„å…ƒç´ æ—¶ï¼Œå¹¶ä¸æ˜¯å–å‡ºæœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ ï¼Œè€Œæ˜¯å–å‡ºé˜Ÿåˆ—ä¸­çš„æœ€å°çš„å…ƒç´ ã€‚</p>
<p>å®é™…ä¸Šæ˜¯ä¸€ä¸ªå †ï¼ˆä¸æŒ‡å®šComparatoræ—¶é»˜è®¤ä¸ºæœ€å°å †ï¼‰</p>
<h3 id="åº•å±‚æ•°æ®ç»“æ„"><a href="#åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="åº•å±‚æ•°æ®ç»“æ„"></a>åº•å±‚æ•°æ®ç»“æ„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] queue; <span class="comment">// non-private to simplify nested class access</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>åº•å±‚ä½¿ç”¨çš„æ˜¯Qbjectæ•°ç»„ä»¥ä¾¿å®¹çº³å„ç§å„æ ·çš„æ•°æ®ç±»å‹ã€‚å¯ä»¥çœ‹å‡ºPriorityQueueä¸ArrayListç›¸ä¼¼ï¼Œæœ¬è´¨ä¸ºä¸€ä¸ªåŠ¨æ€æ•°ç»„ã€‚è€ŒpriorityQueueçš„é€»è¾‘ç»“æ„æ˜¯ä¸€å®Œå…¨äºŒå‰æ ‘ã€‚é»˜è®¤æ’åºä¸ºå°é¡¶å †ã€‚</p>
<h3 id="æ’åºæ–¹å¼"><a href="#æ’åºæ–¹å¼" class="headerlink" title="æ’åºæ–¹å¼"></a>æ’åºæ–¹å¼</h3><p>ä¹‹å‰æåˆ°priorityQueueæ˜¯ä¼šæŒ‰ç…§é˜Ÿåˆ—å…ƒç´ çš„å¤§å°è¿›è¡Œæ’åºï¼Œè¿™é‡Œçš„æ’åºä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š<strong>è‡ªç„¶æ’åº</strong>ä¸<strong>å®šåˆ¶æ’åº</strong>ã€‚</p>
<h4 id="è‡ªç„¶æ’åºï¼ˆnatural-orderingï¼‰"><a href="#è‡ªç„¶æ’åºï¼ˆnatural-orderingï¼‰" class="headerlink" title="è‡ªç„¶æ’åºï¼ˆnatural orderingï¼‰"></a>è‡ªç„¶æ’åºï¼ˆnatural orderingï¼‰</h4><p>Comparableæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(T o)</span></span>;</span><br></pre></td></tr></table></figure>

<p>å®ç°äº†è¯¥æ¥å£çš„ç±»å°±èƒ½è¿›è¡Œæ¯”è¾ƒï¼ŒåŒæ—¶è¯¥ç±»ä¹Ÿå¿…é¡»é‡å†™è¯¥æ¥å£é‡Œçš„æ‰€æœ‰çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¸å¦ä¸€ä¸ªå¯¹è±¡æ¯”è¾ƒæ—¶ï¼Œä¾‹å¦‚obj1.compareTo(obj2),å¦‚æœè¯¥æ–¹æ³•è¿”å›0ï¼Œåˆ™è¡¨æ˜ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å¤§äºobj2;å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜oj1å°äºobj2ã€‚</p>
<h4 id="å®šåˆ¶æ’åºï¼ˆå †æ’åºï¼Œspecified-comparatorï¼‰"><a href="#å®šåˆ¶æ’åºï¼ˆå †æ’åºï¼Œspecified-comparatorï¼‰" class="headerlink" title="å®šåˆ¶æ’åºï¼ˆå †æ’åºï¼Œspecified comparatorï¼‰"></a>å®šåˆ¶æ’åºï¼ˆå †æ’åºï¼Œspecified comparatorï¼‰</h4><p>Compatoræ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(T o1, T o2)</span></span>;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ¥å£åŒ…å«ä¸€ä¸ªint compare(T obj1,T obj2)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ¯”è¾ƒobj1,obj2çš„å¤§å°ï¼šå¦‚æœè¯¥æ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å¤§äºobj2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›0ï¼Œåˆ™è¡¨æ˜o1ç­‰äºo2;å¦‚æœè¯¥æ–¹æ³•è¿”å›è´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜obj1å°äºobj2ã€‚</p>
<p>åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ä½¿ç”¨å®šåˆ¶æ’åºï¼Œåˆ™éœ€è¦æˆ‘ä»¬åœ¨æ„é€ å™¨ä¸­ä¼ å…¥ä¸€ä¸ªComparatorå¯¹è±¡ã€‚</p>
<p>PriorityQueueå¯¹å…ƒç´ é‡‡ç”¨çš„æ˜¯å †æ’åºï¼Œå¤´æ˜¯æŒ‰æŒ‡å®šæ’åºæ–¹å¼çš„æœ€å°å…ƒç´ ã€‚å †æ’åºåªèƒ½ä¿è¯æ ¹æ˜¯æœ€å¤§ï¼ˆæœ€å°ï¼‰ï¼Œæ•´ä¸ªå †å¹¶ä¸æ˜¯æœ‰åºçš„ã€‚</p>
<h3 id="æ–¹æ³•å‰–æ"><a href="#æ–¹æ³•å‰–æ" class="headerlink" title="æ–¹æ³•å‰–æ"></a>æ–¹æ³•å‰–æ</h3><h4 id="add-offer"><a href="#add-offer" class="headerlink" title="add() || offer()"></a>add() || offer()</h4><p>é¦–å…ˆæ¥çœ‹çœ‹addæ–¹æ³•çš„æºç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> offer(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°addæ–¹æ³•çš„åº•å±‚å°±æ˜¯offer()æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">	  <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();<span class="comment">//ä¸å…è®¸æ’å…¥nullå…ƒç´ </span></span><br><span class="line">	modCount++;</span><br><span class="line">	<span class="keyword">int</span> i = size;</span><br><span class="line">	<span class="keyword">if</span> (i &gt;= queue.length)</span><br><span class="line">		grow(i + <span class="number">1</span>);</span><br><span class="line">	size = i + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">		queue[<span class="number">0</span>] = e;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		siftUp(i, e);</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™é‡Œä¼šæœ‰åˆ¤æ–­æ•°ç»„æ˜¯å¦è¶Šç•Œçš„ifåˆ¤æ–­è¯­å¥ï¼Œå¦‚æœæ•°ç»„è¶Šç•Œåˆ™ä¼šè°ƒç”¨grow()å‡½æ•°ï¼Œè¡¨æ˜äº†PriorityQueueå®ç°äº†æ‰©å®¹æœºåˆ¶ï¼Œè€ŒçœŸæ­£æ„ä¹‰ä¸Šå®ç°æ’å…¥çš„å‡½æ•°æ˜¯splitUp()å‡½æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUp</span><span class="params">(<span class="keyword">int</span> k, E x)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (comparator != <span class="keyword">null</span>)</span><br><span class="line">          siftUpUsingComparator(k, x);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          siftUpComparable(k, x);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUpComparable</span><span class="params">(<span class="keyword">int</span> k, E x)</span> </span>&#123;</span><br><span class="line">      Comparable&lt;? <span class="keyword">super</span> E&gt; key = (Comparable&lt;? <span class="keyword">super</span> E&gt;) x;</span><br><span class="line">      <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">int</span> parent = (k - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">          Object e = queue[parent];</span><br><span class="line">          <span class="keyword">if</span> (key.compareTo((E) e) &gt;= <span class="number">0</span>)</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          queue[k] = e;</span><br><span class="line">          k = parent;</span><br><span class="line">      &#125;</span><br><span class="line">      queue[k] = key;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUpUsingComparator</span><span class="params">(<span class="keyword">int</span> k, E x)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">int</span> parent = (k - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">          Object e = queue[parent];</span><br><span class="line">          <span class="keyword">if</span> (comparator.compare(x, (E) e) &gt;= <span class="number">0</span>)</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          queue[k] = e;</span><br><span class="line">          k = parent;</span><br><span class="line">      &#125;</span><br><span class="line">      queue[k] = x;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>siftUpComparableå’ŒsiftUpUsingComparatorè¿™é‡Œçš„é€»è¾‘éƒ½æ˜¯ç›¸åŒçš„ã€‚å½“å‰å…ƒç´ ä¸çˆ¶èŠ‚ç‚¹ä¸æ–­æ¯”è¾ƒå¦‚æœæ¯”çˆ¶èŠ‚ç‚¹å°å°±äº¤æ¢ç„¶åç»§ç»­å‘ä¸Šæ¯”è¾ƒï¼Œå¦åˆ™åœæ­¢æ¯”è¾ƒçš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>å…³äºparent = (k - 1) &gt;&gt;&gt; 1;</p>
<p>é¦–å…ˆ&gt;&gt;&gt; æ˜¯æ— ç¬¦å·å³ç§»ï¼Œç©ºå‡ºä½ç½®å…¨éƒ¨è¡¥0ã€‚å¯¹äºæ­£æ•°æ¥è¯´ï¼Œè¿™é‡Œçš„&gt;&gt;&gt; å’Œ&gt;&gt; è¾¾åˆ°çš„æ•ˆæœä¸€æ ·ï¼Œåªæœ‰å¯¹äºè´Ÿæ•°ä¼šæœ‰æ‰€å·®åˆ«ã€‚è¿™é‡Œå› ä¸ºå¤–å±‚çš„whileå¾ªç¯å·²ç»ä¿è¯äº†k&gt;0ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç†è§£ä¸º(k - 1) &gt;&gt;1;</p>
</blockquote>
<h4 id="poll"><a href="#poll" class="headerlink" title="poll()"></a>poll()</h4><p>poll()æ–¹æ³•å°†è¾“å‡ºæ•´ä¸ªé˜Ÿåˆ—ä¸­çš„æœ€å€¼ï¼Œæˆ‘ä»¬çŸ¥é“ä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚é€»è¾‘æ˜¯å †æ’åºï¼Œæ•´ä¸ªæ•°ç»„ä¸­çš„æœ€å€¼å­˜åœ¨äºqueue[0]ä¸­ï¼Œç”±äºç§»é™¤äº†æœ€å€¼ï¼Œæ‰€ä»¥æ•´ä¸ªå †è¦é‡æ–°è¿›è¡Œæ’åºï¼Œç›¸å½“äºå°†æœ€åä¸€ä¸ªå…ƒç´ è¿›è¡Œé‡æ–°æ’å…¥offer(e)ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> E <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (size == <span class="number">0</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">int</span> s = --size;</span><br><span class="line">      modCount++;</span><br><span class="line">      E result = (E) queue[<span class="number">0</span>];</span><br><span class="line">      E x = (E) queue[s];</span><br><span class="line">      queue[s] = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">if</span> (s != <span class="number">0</span>)</span><br><span class="line">          siftDown(<span class="number">0</span>, x);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftDown</span><span class="params">(<span class="keyword">int</span> k, E x)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (comparator != <span class="keyword">null</span>)</span><br><span class="line">          siftDownUsingComparator(k, x);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">          siftDownComparable(k, x);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ä»siftDownä¸­å¯ä»¥çœ‹å‡ºè¿™é‡Œçš„å†…éƒ¨é€»è¾‘å…¶å®å°±æ˜¯offer()çš„å†…éƒ¨é€»è¾‘ã€‚</p>
<h4 id="peek"><a href="#peek" class="headerlink" title="peek()"></a>peek()</h4><p>è·å–ä½†ä¸ç§»é™¤æ­¤é˜Ÿåˆ—çš„å¤´ï¼Œå¦‚æœæ­¤é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›nullã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (size == <span class="number">0</span>) ? <span class="keyword">null</span> : (E) queue[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°å¤§é¡¶å †"><a href="#å®ç°å¤§é¡¶å †" class="headerlink" title="å®ç°å¤§é¡¶å †"></a>å®ç°å¤§é¡¶å †</h3><p>PriorityQueueé»˜è®¤æ˜¯ä¸€ä¸ªå°é¡¶å †ï¼Œç„¶è€Œå¯ä»¥é€šè¿‡ä¼ å…¥è‡ªå®šä¹‰çš„Comparatorå‡½æ•°æ¥å®ç°å¤§é¡¶å †ã€‚å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">11</span>;</span><br><span class="line">PriorityQueue&lt;Integer&gt; maxHeap=<span class="keyword">new</span> PriorityQueue&lt;Integer&gt;(DEFAULT_INITIAL_CAPACITY, <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;                </span><br><span class="line">           <span class="keyword">return</span> o2-o1;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„â•"><a href="#æ³¨æ„â•" class="headerlink" title="æ³¨æ„â•"></a>æ³¨æ„â•</h3><ol>
<li>PriorityQueueä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„<strong>ã€‚</strong>å¦‚æœå¤šä¸ªçº¿ç¨‹ä¸­çš„ä»»æ„çº¿ç¨‹ä»ç»“æ„ä¸Šä¿®æ”¹äº†åˆ—è¡¨ï¼Œ åˆ™è¿™äº›çº¿ç¨‹ä¸åº”åŒæ—¶è®¿é—® PriorityQueue å®ä¾‹ï¼Œè¿™æ—¶è¯·ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„PriorityBlockingQueue ç±»ã€‚</li>
<li>å½“æ’å…¥nullå…ƒç´ çš„æ—¶å€™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>æ–¹æ³•iterator()ä¸­æä¾›çš„è¿­ä»£å™¨å¹¶ä¸ä¿è¯ä»¥æœ‰åºçš„æ–¹å¼éå†ä¼˜PriorityQueueä¸­çš„å…ƒç´ ã€‚</li>
</ol>
<h2 id="ArrayDeque"><a href="#ArrayDeque" class="headerlink" title="ArrayDeque"></a>ArrayDeque</h2><p>ä»æˆ‘ä»¬ä¹‹å‰çš„<a target="_blank" rel="noopener" href="https://xiaozhu-sorce.github.io/2021/12/12/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BList/">Javaé›†åˆæ¡†æ¶ä¹‹List</a>æœ€å¼€å§‹çš„å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒQueueæœ‰ä¸€ä¸ªç›´æ¥å­ç±»PriorityQueueï¼Œè¿˜æœ‰ä¸€ä¸ªå­æ¥å£Dequeï¼ŒçœŸæ­£å®ç°äº†Dequeæ¥å£çš„ä¸¤ä¸ªç±»æ˜¯ArrayDequeå’ŒLinkedListã€‚å…¶ä¸­LinkedListä»¥åŠåœ¨<strong>Javaé›†åˆæ¡†æ¶ä¹‹List</strong>é‡Œé¢æåŠåˆ°ã€‚è¿™é‡Œæˆ‘ä»¬åšè¯¦ç»†è¯´æ˜çš„æ˜¯ArrayDequeå®ç°ç±»ã€‚</p>
<p>ArrayDequeæ˜¯æ— åˆå§‹å®¹é‡çš„åŒç«¯é˜Ÿåˆ—ï¼ŒLinkedListåˆ™æ˜¯åŒå‘é“¾è¡¨ã€‚è€Œæˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°ï¼ŒArrayDequeä½œä¸ºé˜Ÿåˆ—æ—¶çš„æ•ˆç‡æ¯”LinkedListè¦é«˜ï¼Œè€Œåœ¨æ ˆçš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œæ— ç–‘å…·æœ‰å°¾ç»“ç‚¹ä¸éœ€åˆ¤ç©ºçš„LinkedListè¾ƒé«˜æ•ˆã€‚ </p>
<h3 id="åº•å±‚æ•°æ®ç»“æ„-1"><a href="#åº•å±‚æ•°æ®ç»“æ„-1" class="headerlink" title="åº•å±‚æ•°æ®ç»“æ„"></a>åº•å±‚æ•°æ®ç»“æ„</h3><p>ArrayDequeä¸ºäº†æ»¡è¶³å¯ä»¥åŒæ—¶åœ¨æ•°ç»„ä¸¤ç«¯æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„éœ€æ±‚ï¼Œå…¶å†…éƒ¨çš„åŠ¨æ€æ•°ç»„å¿…é¡»æ˜¯å¾ªç¯çš„ï¼Œå³å¾ªç¯æ•°ç»„ï¼ˆcircular arrayï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°ç»„çš„ä»»ä½•ä¸€ç‚¹éƒ½å¯èƒ½è¢«çœ‹ä½œèµ·ç‚¹æˆ–è€…ç»ˆç‚¹ã€‚</p>
<p>ArrayDequeç»´æŠ¤äº†ä¸¤ä¸ªå˜é‡headå’Œtailï¼Œè¡¨ç¤ºArrayDequeçš„å¤´å’Œå°¾</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] elements; <span class="comment">// non-private to simplify nested class access</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> head;</span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> tail;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_INITIAL_CAPACITY = <span class="number">8</span>;</span><br></pre></td></tr></table></figure>

<h3 id="æ–¹æ³•å‰–æ-1"><a href="#æ–¹æ³•å‰–æ-1" class="headerlink" title="æ–¹æ³•å‰–æ"></a>æ–¹æ³•å‰–æ</h3><h4 id="addFirst"><a href="#addFirst" class="headerlink" title="addFirst()"></a>addFirst()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">  elements[head = (head - <span class="number">1</span>) &amp; (elements.length - <span class="number">1</span>)] = e;</span><br><span class="line">  <span class="keyword">if</span> (head == tail)</span><br><span class="line">    doubleCapacity();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ’å…¥çš„å…ƒç´ ä¸å¯ä»¥ä¸ºç©º</li>
<li>å¤´æ’å®é™…ä¸Šæ˜¯å‡ä¸€ã€‚å½“å‡åˆ°0æ—¶åœ¨ä»æ•°ç»„æœ«å°¾å¼€å§‹</li>
<li>å¦‚æœå¤´å°¾ç›¸ç­‰ï¼Œåˆ™äºŒå€æ‰©å®¹ã€‚åœ¨è¿™é‡Œä¹Ÿåæ˜ å‡ºæ¥ï¼Œheadå’Œtailåœ¨æ’å…¥ä¹‹å‰æŒ‡å‘çš„ä½ç½®éƒ½ä¸€å®šæ˜¯ç©ºçš„ï¼Œä¸€å®šå¯ä»¥è¿›è¡Œæ’å…¥æ“ä½œï¼Œåœ¨æ’å…¥ä¹‹ååœ¨ä¼šè¿›è¡Œåˆ¤æ®µæ•°ç»„æ˜¯å¦æ»¡</li>
</ul>
<h4 id="doubleCapacity"><a href="#doubleCapacity" class="headerlink" title="doubleCapacity()"></a>doubleCapacity()</h4><p>æ‰©å®¹å‡½æ•°doubleCapacity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doubleCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">assert</span> head == tail;</span><br><span class="line">  <span class="keyword">int</span> p = head;</span><br><span class="line">  <span class="keyword">int</span> n = elements.length;</span><br><span class="line">  <span class="keyword">int</span> r = n - p; <span class="comment">// number of elements to the right of p</span></span><br><span class="line">  <span class="keyword">int</span> newCapacity = n &lt;&lt; <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (newCapacity &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;Sorry, deque too big&quot;</span>);</span><br><span class="line">  Object[] a = <span class="keyword">new</span> Object[newCapacity];</span><br><span class="line">  System.arraycopy(elements, p, a, <span class="number">0</span>, r);</span><br><span class="line">  System.arraycopy(elements, <span class="number">0</span>, a, r, p);</span><br><span class="line">  elements = a;</span><br><span class="line">  head = <span class="number">0</span>;</span><br><span class="line">  tail = n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨å¦‚ä¸‹å›¾æ¥ç†è§£ã€‚</p>
<p>å¤åˆ¶åˆ†ä¸¤æ¬¡è¿›è¡Œï¼Œç¬¬ä¸€æ¬¡å¤åˆ¶headå³è¾¹çš„å…ƒç´ ï¼Œç¬¬äºŒæ¬¡å¤åˆ¶headå·¦è¾¹çš„å…ƒç´ ã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0q1kfg6aqj20xc0c8js7.jpg" loading="lazy"></p>
<p>ArrayDequeä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å½“ä½œä¸ºæ ˆä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯”Stackå¥½ï¼›å½“ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯”LinkedListå¥½ã€‚</p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>å°æœ±</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://example.com/2022/01/24/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BQueue/" title="Javaé›†åˆæ¡†æ¶ä¹‹Queue">http://example.com/2022/01/24/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BQueue/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/04/18/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E4%B9%8BMap/" rel="prev" title="Javaé›†åˆæ¡†æ¶ä¹‹Map"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Javaé›†åˆæ¡†æ¶ä¹‹Map</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/01/17/Git%E4%B9%8B%E5%A4%9A%E4%BA%BA%E5%8D%8F%E4%BD%9C/" rel="next" title="Gitä¹‹å¤šäººåä½œ"><span class="post-nav-text">Gitä¹‹å¤šäººåä½œ</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> xiaozhu-sorce</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.2</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.8.11</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true,"opacity":0.7},"log":false});</script></body></html>